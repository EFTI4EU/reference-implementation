{
	"info": {
		"_postman_id": "25a18b1d-50d8-49bd-9ed3-83cbd13507ab",
		"name": "eFTI",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "32860366"
	},
	"item": [
		{
			"name": "BO",
			"item": [
				{
					"name": "Gate",
					"item": [
						{
							"name": "Authentication BO",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											" // Set access_token global variable\r",
											"let responseData = pm.response.json();\r",
											"pm.globals.set(\"access_token\", responseData.access_token);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "username",
											"value": "user_bo",
											"type": "text"
										},
										{
											"key": "password",
											"value": "Azerty59*123",
											"type": "text"
										},
										{
											"key": "grant_type",
											"value": "password",
											"type": "text"
										},
										{
											"key": "client_id",
											"value": "gate",
											"type": "text"
										},
										{
											"key": "client_secret",
											"value": "{{kc_gate_bo_secret}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{kc_bo_url}}/realms/eFTI_BO/protocol/openid-connect/token",
									"host": [
										"{{kc_bo_url}}"
									],
									"path": [
										"realms",
										"eFTI_BO",
										"protocol",
										"openid-connect",
										"token"
									]
								}
							},
							"response": []
						},
						{
							"name": "Post UIL Control",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"gateId\": \"borduria\",\r\n    \"datasetId\": \"12345678-ab12-4ab6-8999-123456789abc\",\r\n    \"platformId\": \"acme\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{gate_bo_url}}/v1/requestUil",
									"host": [
										"{{gate_bo_url}}"
									],
									"path": [
										"v1",
										"requestUil"
									]
								}
							},
							"response": []
						},
						{
							"name": "get Request Uuid",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "",
										"type": "text",
										"disabled": true
									}
								],
								"url": {
									"raw": "{{gate_bo_url}}/v1/requestUil?requestId=6ec2bb3b-d984-4d0c-a272-0110d3fd56fa",
									"host": [
										"{{gate_bo_url}}"
									],
									"path": [
										"v1",
										"requestUil"
									],
									"query": [
										{
											"key": "requestId",
											"value": "6ec2bb3b-d984-4d0c-a272-0110d3fd56fa"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "post Identifiers Control",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"modeCode\": \"1\",\r\n  \"identifier\": \"54321\",\r\n  \"identifierType\": [\r\n    \"EQUIPMENT\"\r\n  ],\r\n  \"registrationCountryCode\": \"FR\",\r\n  \"dangerousGoodsIndicator\": false,\r\n  \"eftiGateIndicator\": [\"BO\", \"SY\"]\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{gate_bo_url}}/v1/getIdentifiers",
									"host": [
										"{{gate_bo_url}}"
									],
									"path": [
										"v1",
										"getIdentifiers"
									]
								}
							},
							"response": []
						},
						{
							"name": "GET Identifiers Control",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gate_bo_url}}/v1/getIdentifiers?requestId=83df07ac-44de-4ac4-9774-4939adead502",
									"host": [
										"{{gate_bo_url}}"
									],
									"path": [
										"v1",
										"getIdentifiers"
									],
									"query": [
										{
											"key": "requestId",
											"value": "83df07ac-44de-4ac4-9774-4939adead502"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Gate to SY Gate UIL",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"gateId\": \"syldavia\",\r\n    \"datasetId\": \"12345678-ab12-4ab6-8999-123456789abc\",\r\n    \"platformId\": \"massivedynamic\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{gate_bo_url}}/v1/requestUil",
									"host": [
										"{{gate_bo_url}}"
									],
									"path": [
										"v1",
										"requestUil"
									]
								}
							},
							"response": []
						},
						{
							"name": "Gate to LI Gate UIL",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"gateId\": \"listenbourg\",\r\n    \"datasetId\": \"12345678-ab12-4ab6-8999-123456789abc\",\r\n    \"platformId\": \"umbrellainc\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{gate_bo_url}}/v1/requestUil",
									"host": [
										"{{gate_bo_url}}"
									],
									"path": [
										"v1",
										"requestUil"
									]
								}
							},
							"response": []
						},
						{
							"name": "Post Note",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"requestUuid\": \"8eac5f10-cc39-4a25-aca5-e43604611bd0\",\r\n    \"eFTIPlatformUrl\": \"http://efti.platform.acme.com\",\r\n    \"eFTIGateUrl\": \"http://efti.gate.borduria.eu\",\r\n    \"eFTIDataUuid\": \"12345678-ab12-4ab6-8999-123456789abc\",\r\n    \"note\":\"The inspection did not reveal any anomalies. We recommend that you replace the tires as they are on the verge of wear\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{gate_bo_url}}/v1/notes",
									"host": [
										"{{gate_bo_url}}"
									],
									"path": [
										"v1",
										"notes"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Simulator",
					"item": [
						{
							"name": "Authentification",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											" // Set access_token global variable\r",
											"let responseData = pm.response.json();\r",
											"pm.globals.set(\"access_token\", responseData.access_token);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "username",
											"value": "user_bo",
											"type": "text",
											"disabled": true
										},
										{
											"key": "password",
											"value": "Azerty59*123",
											"type": "text",
											"disabled": true
										},
										{
											"key": "grant_type",
											"value": "client_credentials",
											"type": "text"
										},
										{
											"key": "client_id",
											"value": "simulator",
											"type": "text"
										},
										{
											"key": "client_secret",
											"value": "{{kc_simulator_bo_secret}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{kc_bo_url}}/realms/eFTI_BO/protocol/openid-connect/token",
									"host": [
										"{{kc_bo_url}}"
									],
									"path": [
										"realms",
										"eFTI_BO",
										"protocol",
										"openid-connect",
										"token"
									]
								}
							},
							"response": []
						},
						{
							"name": "upload File",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "file",
											"type": "file",
											"src": "/C:/Users/jthueux/Desktop/cda/12345678-ab12-4ab6-8999-123456789abe.xml"
										}
									]
								},
								"url": {
									"raw": "{{simulator_bo_url}}/identifiers/upload/file",
									"host": [
										"{{simulator_bo_url}}"
									],
									"path": [
										"identifiers",
										"upload",
										"file"
									]
								}
							},
							"response": []
						},
						{
							"name": "upload Identifiers",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"consignment\": {\r\n    \"carrierAcceptanceDateTime\": {\r\n      \"formatId\": \"205\",\r\n      \"value\": \"202310011000+0000\"\r\n    },\r\n    \"deliveryEvent\": {\r\n      \"actualOccurrenceDateTime\": {\r\n        \"formatId\": \"205\",\r\n        \"value\": \"202310021500+0000\"\r\n      }\r\n    },\r\n    \"mainCarriageTransportMovement\": [\r\n      {\r\n        \"dangerousGoodsIndicator\": false,\r\n        \"modeCode\": \"1\",\r\n        \"usedTransportMeans\": {\r\n          \"id\": {\r\n            \"schemeAgencyId\": \"UN\",\r\n            \"value\": \"12345\"\r\n          },\r\n          \"registrationCountry\": {\r\n            \"code\": \"DE\"\r\n          }\r\n        }\r\n      }\r\n    ],\r\n    \"usedTransportEquipment\": [\r\n      {\r\n        \"carriedTransportEquipment\": [\r\n          {\r\n            \"id\": {\r\n              \"schemeAgencyId\": \"UN\",\r\n              \"value\": \"67890\"\r\n            },\r\n            \"sequenceNumber\": 1\r\n          }\r\n        ],\r\n        \"categoryCode\": \"AE\",\r\n        \"id\": {\r\n          \"schemeAgencyId\": \"UN\",\r\n          \"value\": \"54321\"\r\n        },\r\n        \"registrationCountry\": {\r\n          \"code\": \"FR\"\r\n        },\r\n        \"sequenceNumber\": 2\r\n      }\r\n    ]\r\n  },\r\n  \"datasetId\": \"12345678-ab12-4ab6-8999-123456789abc\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{simulator_bo_url}}/identifiers/upload",
									"host": [
										"{{simulator_bo_url}}"
									],
									"path": [
										"identifiers",
										"upload"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "LI",
			"item": [
				{
					"name": "Gate",
					"item": [
						{
							"name": "Authentication LI",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											" // Set access_token global variable\r",
											"let responseData = pm.response.json();\r",
											"pm.globals.set(\"access_token\", responseData.access_token);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "username",
											"value": "user_li",
											"type": "text"
										},
										{
											"key": "password",
											"value": "Azerty59*123",
											"type": "text"
										},
										{
											"key": "grant_type",
											"value": "password",
											"type": "text"
										},
										{
											"key": "client_id",
											"value": "gate",
											"type": "text"
										},
										{
											"key": "client_secret",
											"value": "{{kc_gate_li_secret}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{kc_li_url}}/realms/eFTI_LI/protocol/openid-connect/token",
									"host": [
										"{{kc_li_url}}"
									],
									"path": [
										"realms",
										"eFTI_LI",
										"protocol",
										"openid-connect",
										"token"
									]
								}
							},
							"response": []
						},
						{
							"name": "Post UIL Control",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"gateId\": \"listenbourg\",\r\n    \"datasetId\": \"12345678-ab12-4ab6-8999-123456789abc\",\r\n    \"platformId\": \"umbrellainc\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{gate_li_url}}/v1/requestUil",
									"host": [
										"{{gate_li_url}}"
									],
									"path": [
										"v1",
										"requestUil"
									]
								}
							},
							"response": []
						},
						{
							"name": "get Request Uuid",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "",
										"type": "text",
										"disabled": true
									}
								],
								"url": {
									"raw": "{{gate_li_url}}/v1/requestUil?requestId=9d5711db-cb33-436a-b9a6-d2efb25fe619",
									"host": [
										"{{gate_li_url}}"
									],
									"path": [
										"v1",
										"requestUil"
									],
									"query": [
										{
											"key": "requestId",
											"value": "9d5711db-cb33-436a-b9a6-d2efb25fe619"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "post Identifiers Control",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"modeCode\": \"1\",\r\n  \"identifier\": \"54321\",\r\n  \"identifierType\": [\r\n    \"EQUIPMENT\"\r\n  ],\r\n  \"registrationCountryCode\": \"FR\",\r\n  \"dangerousGoodsIndicator\": false,\r\n  \"eftiGateIndicator\": [\"LI\", \"SY\"]\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{gate_li_url}}/v1/getIdentifiers",
									"host": [
										"{{gate_li_url}}"
									],
									"path": [
										"v1",
										"getIdentifiers"
									]
								}
							},
							"response": []
						},
						{
							"name": "GET Identifiers Control",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gate_li_url}}/v1/getIdentifiers?requestId=5ec2b791-7953-4bd7-8f8a-d8efdfaca280",
									"host": [
										"{{gate_li_url}}"
									],
									"path": [
										"v1",
										"getIdentifiers"
									],
									"query": [
										{
											"key": "requestId",
											"value": "5ec2b791-7953-4bd7-8f8a-d8efdfaca280"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Gate to Gate UIL",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"gateId\": \"borduria\",\r\n    \"datasetId\": \"12345678-ab12-4ab6-8999-123456789abc\",\r\n    \"platformId\": \"acme\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{gate_li_url}}/v1/requestUil",
									"host": [
										"{{gate_li_url}}"
									],
									"path": [
										"v1",
										"requestUil"
									]
								}
							},
							"response": []
						},
						{
							"name": "Post Note",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"requestUuid\": \"09c7a0cd-64b2-44fc-b2bd-27eefb0a2a17\",\r\n    \"eFTIPlatformUrl\": \"http://efti.platform.umbrellainc.com\",\r\n    \"eFTIGateUrl\": \"http://efti.gate.listenbourg.eu\",\r\n    \"eFTIDataUuid\": \"12345678-ab12-4ab6-8999-123456789abc\",\r\n    \"note\":\"The inspection did not reveal any anomalies. We recommend that you replace the tires as they are on the verge of wear\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{gate_li_url}}/v1/notes",
									"host": [
										"{{gate_li_url}}"
									],
									"path": [
										"v1",
										"notes"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Simulator",
					"item": [
						{
							"name": "Authentification",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											" // Set access_token global variable\r",
											"let responseData = pm.response.json();\r",
											"pm.globals.set(\"access_token\", responseData.access_token);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "username",
											"value": "user_bo",
											"type": "text",
											"disabled": true
										},
										{
											"key": "password",
											"value": "Azerty59*123",
											"type": "text",
											"disabled": true
										},
										{
											"key": "grant_type",
											"value": "client_credentials",
											"type": "text"
										},
										{
											"key": "client_id",
											"value": "simulator",
											"type": "text"
										},
										{
											"key": "client_secret",
											"value": "{{kc_simulator_li_secret}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{kc_li_url}}/realms/eFTI_LI/protocol/openid-connect/token",
									"host": [
										"{{kc_li_url}}"
									],
									"path": [
										"realms",
										"eFTI_LI",
										"protocol",
										"openid-connect",
										"token"
									]
								}
							},
							"response": []
						},
						{
							"name": "upload File",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "file",
											"type": "file",
											"src": "/C:/Users/jthueux/Desktop/cda/12345678-ab12-4ab6-8999-123456789abe.xml"
										}
									]
								},
								"url": {
									"raw": "{{simulator_li_url}}/identifiers/upload/file",
									"host": [
										"{{simulator_li_url}}"
									],
									"path": [
										"identifiers",
										"upload",
										"file"
									]
								}
							},
							"response": []
						},
						{
							"name": "upload Identifiers",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"consignment\": {\r\n    \"carrierAcceptanceDateTime\": {\r\n      \"formatId\": \"205\",\r\n      \"value\": \"202310011000+0000\"\r\n    },\r\n    \"deliveryEvent\": {\r\n      \"actualOccurrenceDateTime\": {\r\n        \"formatId\": \"205\",\r\n        \"value\": \"202310021500+0000\"\r\n      }\r\n    },\r\n    \"mainCarriageTransportMovement\": [\r\n      {\r\n        \"dangerousGoodsIndicator\": false,\r\n        \"modeCode\": \"1\",\r\n        \"usedTransportMeans\": {\r\n          \"id\": {\r\n            \"schemeAgencyId\": \"UN\",\r\n            \"value\": \"12345\"\r\n          },\r\n          \"registrationCountry\": {\r\n            \"code\": \"DE\"\r\n          }\r\n        }\r\n      }\r\n    ],\r\n    \"usedTransportEquipment\": [\r\n      {\r\n        \"carriedTransportEquipment\": [\r\n          {\r\n            \"id\": {\r\n              \"schemeAgencyId\": \"UN\",\r\n              \"value\": \"67890\"\r\n            },\r\n            \"sequenceNumber\": 1\r\n          }\r\n        ],\r\n        \"categoryCode\": \"AE\",\r\n        \"id\": {\r\n          \"schemeAgencyId\": \"UN\",\r\n          \"value\": \"54321\"\r\n        },\r\n        \"registrationCountry\": {\r\n          \"code\": \"FR\"\r\n        },\r\n        \"sequenceNumber\": 2\r\n      }\r\n    ]\r\n  },\r\n  \"datasetId\": \"12345678-ab12-4ab6-8999-123456789abc\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{simulator_li_url}}/identifiers/upload",
									"host": [
										"{{simulator_li_url}}"
									],
									"path": [
										"identifiers",
										"upload"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "SY",
			"item": [
				{
					"name": "Gate",
					"item": [
						{
							"name": "Authentication SY",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											" // Set access_token global variable\r",
											"let responseData = pm.response.json();\r",
											"pm.globals.set(\"access_token\", responseData.access_token);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "username",
											"value": "user_sy",
											"type": "text"
										},
										{
											"key": "password",
											"value": "Azerty59*123",
											"type": "text"
										},
										{
											"key": "grant_type",
											"value": "password",
											"type": "text"
										},
										{
											"key": "client_id",
											"value": "gate",
											"type": "text"
										},
										{
											"key": "client_secret",
											"value": "{{kc_gate_sy_secret}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{kc_sy_url}}/realms/eFTI_SY/protocol/openid-connect/token",
									"host": [
										"{{kc_sy_url}}"
									],
									"path": [
										"realms",
										"eFTI_SY",
										"protocol",
										"openid-connect",
										"token"
									]
								}
							},
							"response": []
						},
						{
							"name": "Post UIL Control",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"gateId\": \"syldavia\",\r\n    \"datasetId\": \"12345678-ab12-4ab6-8999-123456789abc\",\r\n    \"platformId\": \"massivedynamic\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{gate_sy_url}}/v1/requestUil",
									"host": [
										"{{gate_sy_url}}"
									],
									"path": [
										"v1",
										"requestUil"
									]
								}
							},
							"response": []
						},
						{
							"name": "get Request Uuid",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "",
										"type": "text",
										"disabled": true
									}
								],
								"url": {
									"raw": "{{gate_sy_url}}/v1/requestUil?requestId=6d84d0dc-1846-4602-ae32-e50fabc43a91",
									"host": [
										"{{gate_sy_url}}"
									],
									"path": [
										"v1",
										"requestUil"
									],
									"query": [
										{
											"key": "requestId",
											"value": "6d84d0dc-1846-4602-ae32-e50fabc43a91"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "post Identifiers Control",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "",
										"type": "text",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"modeCode\": \"1\",\r\n  \"identifier\": \"54321\",\r\n  \"identifierType\": [\r\n    \"EQUIPMENT\"\r\n  ],\r\n  \"registrationCountryCode\": \"FR\",\r\n  \"dangerousGoodsIndicator\": false,\r\n  \"eftiGateIndicator\": [\"LI\", \"SY\"]\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{gate_sy_url}}/v1/getIdentifiers",
									"host": [
										"{{gate_sy_url}}"
									],
									"path": [
										"v1",
										"getIdentifiers"
									]
								}
							},
							"response": []
						},
						{
							"name": "GET Identifiers Control",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{gate_sy_url}}/v1/getIdentifiers?requestId=98188661-b803-4d0c-b21f-d368c7417b8b",
									"host": [
										"{{gate_sy_url}}"
									],
									"path": [
										"v1",
										"getIdentifiers"
									],
									"query": [
										{
											"key": "requestId",
											"value": "98188661-b803-4d0c-b21f-d368c7417b8b"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Gate to Gate UIL",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"gateId\": \"borduria\",\r\n    \"datasetId\": \"12345678-ab12-4ab6-8999-123456789abc\",\r\n    \"platformId\": \"acme\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{gate_sy_url}}/v1/requestUil",
									"host": [
										"{{gate_sy_url}}"
									],
									"path": [
										"v1",
										"requestUil"
									]
								}
							},
							"response": []
						},
						{
							"name": "Post Note",
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"requestUuid\": \"09c7a0cd-64b2-44fc-b2bd-27eefb0a2a17\",\r\n    \"eFTIPlatformUrl\": \"http://efti.platform.massivedynamic.com\",\r\n    \"eFTIGateUrl\": \"http://efti.gate.syldavia.eu\",\r\n    \"eFTIDataUuid\": \"12345678-ab12-4ab6-8999-123456789abc\",\r\n    \"note\":\"The inspection did not reveal any anomalies. We recommend that you replace the tires as they are on the verge of wear\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{gate_sy_url}}/v1/notes",
									"host": [
										"{{gate_sy_url}}"
									],
									"path": [
										"v1",
										"notes"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Simulator",
					"item": [
						{
							"name": "Authentification",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "test",
									"script": {
										"exec": [
											" // Set access_token global variable\r",
											"let responseData = pm.response.json();\r",
											"pm.globals.set(\"access_token\", responseData.access_token);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "username",
											"value": "user_bo",
											"type": "text",
											"disabled": true
										},
										{
											"key": "password",
											"value": "Azerty59*123",
											"type": "text",
											"disabled": true
										},
										{
											"key": "grant_type",
											"value": "client_credentials",
											"type": "text"
										},
										{
											"key": "client_id",
											"value": "simulator",
											"type": "text"
										},
										{
											"key": "client_secret",
											"value": "{{kc_simulator_sy_secret}}",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{kc_sy_url}}/realms/eFTI_SY/protocol/openid-connect/token",
									"host": [
										"{{kc_sy_url}}"
									],
									"path": [
										"realms",
										"eFTI_SY",
										"protocol",
										"openid-connect",
										"token"
									]
								}
							},
							"response": []
						},
						{
							"name": "upload File",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "file",
											"type": "file",
											"src": "/C:/Users/dfourmaux/Desktop/jdd_efti/12345678-ab12-4ab6-8999-123456789abc.xml"
										}
									]
								},
								"url": {
									"raw": "{{simulator_sy_url}}/identifiers/upload/file",
									"host": [
										"{{simulator_sy_url}}"
									],
									"path": [
										"identifiers",
										"upload",
										"file"
									]
								}
							},
							"response": []
						},
						{
							"name": "upload Identifiers",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"consignment\": {\r\n    \"carrierAcceptanceDateTime\": {\r\n      \"formatId\": \"205\",\r\n      \"value\": \"202310011000+0000\"\r\n    },\r\n    \"deliveryEvent\": {\r\n      \"actualOccurrenceDateTime\": {\r\n        \"formatId\": \"205\",\r\n        \"value\": \"202310021500+0000\"\r\n      }\r\n    },\r\n    \"mainCarriageTransportMovement\": [\r\n      {\r\n        \"dangerousGoodsIndicator\": false,\r\n        \"modeCode\": \"1\",\r\n        \"usedTransportMeans\": {\r\n          \"id\": {\r\n            \"schemeAgencyId\": \"UN\",\r\n            \"value\": \"12345\"\r\n          },\r\n          \"registrationCountry\": {\r\n            \"code\": \"DE\"\r\n          }\r\n        }\r\n      }\r\n    ],\r\n    \"usedTransportEquipment\": [\r\n      {\r\n        \"carriedTransportEquipment\": [\r\n          {\r\n            \"id\": {\r\n              \"schemeAgencyId\": \"UN\",\r\n              \"value\": \"67890\"\r\n            },\r\n            \"sequenceNumber\": 1\r\n          }\r\n        ],\r\n        \"categoryCode\": \"AE\",\r\n        \"id\": {\r\n          \"schemeAgencyId\": \"UN\",\r\n          \"value\": \"54321\"\r\n        },\r\n        \"registrationCountry\": {\r\n          \"code\": \"FR\"\r\n        },\r\n        \"sequenceNumber\": 2\r\n      }\r\n    ]\r\n  },\r\n  \"datasetId\": \"12345678-ab12-4ab6-8999-123456789abc\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{simulator_sy_url}}/identifiers/upload",
									"host": [
										"{{simulator_sy_url}}"
									],
									"path": [
										"identifiers",
										"upload"
									]
								}
							},
							"response": []
						}
					]
				}
			]
		}
	],
	"variable": [
		{
			"key": "bearer",
			"value": " "
		}
	]
}